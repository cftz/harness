# Jira Issues Output

Instructions for creating Jira issues from improvement suggestions.

## Prerequisites

This document requires the `jira` MCP server to be configured. Verify with:

```
ListMcpResourcesTool(server="jira")
```

If not configured, return error:
```
STATUS: ERROR
OUTPUT: Jira MCP server is not configured. Add jira server to .mcp.json first.
```

## When to Use

Use this reference when `PROJECT_ID` is provided with `PROVIDER=jira`.

## MCP Tools Used

| Tool | Purpose |
|------|---------|
| `mcp__jira__jira_create_issue` | Create new issues |
| `mcp__jira__jira_add_comment` | Add comment to parent issue |

## Process

### 1. Prioritize Suggestions

From the analysis results, identify items that should become issues:
- All Critical and High severity codebase issues
- All High Impact workflow improvements

Group related items to avoid creating too many issues.

### 2. Create Parent Issue (Optional)

If there are multiple suggestions, consider creating a parent issue:

```
mcp__jira__jira_create_issue(
    project_key="{PROJECT_ID}",
    summary="Improvement Suggestions - {TARGET}",
    issue_type="Task",
    description="Analysis identified {N} improvement opportunities."
)
```

Store the returned issue key in `parent_issue_key`.

### 3. Create Child Issues

For each prioritized suggestion, create a sub-task under the parent:

```
mcp__jira__jira_create_issue(
    project_key="{PROJECT_ID}",
    summary="{Issue title}",
    issue_type="Sub-task",
    description="{Detailed description with context and suggested fix}",
    additional_fields={"parent": {"key": "{parent_issue_key}"}}
)
```

**Issue Title Format**:
- For codebase issues: `[{Severity}] {Category}: {Brief description}`
- For workflow improvements: `[Improvement] {Area}: {Brief description}`

**Description Template**:
```markdown
## Context

{Description of the issue or improvement opportunity}

## Location

{File path and line number if applicable}

## Suggested Action

{Specific steps to address this}

## Expected Benefit

{What improvement will result}

---
*Generated by suggest-improvements skill*
```

### 4. Add Summary Comment

Add a summary comment on the parent issue:

```
mcp__jira__jira_add_comment(
    issue_key="{parent_issue_key}",
    comment="Created {X} sub-tasks from improvement analysis.\n\nSee sub-tasks for details."
)
```

### 5. Return Output

Report the result following the standard output format:

```
STATUS: SUCCESS
OUTPUT:
  RESULT: COMPLETE
  ISSUES_COUNT: Critical={X}, High={Y}, Medium={Z}, Low={W}
  OUTPUT_PATH: Jira Issues created in {PROJECT_ID} (parent: {parent_issue_key})
```

## Example

```
Input:
  TARGET: repository
  PROJECT_ID: MYPROJ
  PROVIDER: jira

Execution:
  1. Create parent issue:
     mcp__jira__jira_create_issue(
         project_key="MYPROJ",
         summary="Improvement Suggestions - repository",
         issue_type="Task",
         description="Analysis identified 5 improvement opportunities."
     )
     -> Created MYPROJ-100

  2. Create child issues:
     mcp__jira__jira_create_issue(
         project_key="MYPROJ",
         summary="[Critical] Repository: SQL injection vulnerability",
         issue_type="Sub-task",
         description="...",
         additional_fields={"parent": {"key": "MYPROJ-100"}}
     )
     -> Created MYPROJ-101

     mcp__jira__jira_create_issue(
         project_key="MYPROJ",
         summary="[High] Repository: N+1 query in GetUsers",
         issue_type="Sub-task",
         description="...",
         additional_fields={"parent": {"key": "MYPROJ-100"}}
     )
     -> Created MYPROJ-102

  3. Add summary comment:
     mcp__jira__jira_add_comment(
         issue_key="MYPROJ-100",
         comment="Created 2 sub-tasks from improvement analysis..."
     )

Output:
  STATUS: SUCCESS
  OUTPUT:
    RESULT: COMPLETE
    ISSUES_COUNT: Critical=1, High=1, Medium=0, Low=0
    OUTPUT_PATH: Jira Issues created in MYPROJ (parent: MYPROJ-100)
```

## Notes

- Limit to 10 issues per analysis to avoid overwhelming the backlog
- Combine related small issues into single tickets
- Use labels to categorize (e.g., `tech-debt`, `automation`, `documentation`) if project supports them
- Consider assigning to appropriate team members if known
- Sub-tasks automatically inherit priority workflow from parent
